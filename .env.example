# Environment Variables Configuration

## Required Variables

### Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=your_password
DB_NAME=car_tracker

### Database Connection Pooling (Optional - defaults provided)
DB_POOL_MAX=100          # Maximum number of connections
DB_POOL_MIN=20           # Minimum number of connections
DB_POOL_SIZE=50          # Pool size

### JWT Configuration
JWT_SECRET=your_jwt_secret_key_here
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_here

### Server Configuration
PORT=5000
BASE_URL=http://localhost:5173

### Redis Configuration (Required for caching, rate limiting, and background jobs)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=              # Optional, leave empty if no password
REDIS_DB=0                   # Redis database number (0-15)

### Email Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_FROM=your_email@gmail.com
APP_NAME=Car Tracker
APP_URL=http://localhost:5173

### Monitoring (Sentry)
SENTRY_DSN=                  # Your Sentry DSN for error tracking (optional)
NODE_ENV=development         # development | production

### CORS Configuration
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:5174

## Environment-Specific Settings

### Development
NODE_ENV=development
# Sentry traces 100% of requests in development
# Redis connection retries more aggressively

### Production
NODE_ENV=production
# Sentry traces 10% of requests in production
# Stricter rate limiting
# Connection pooling optimized for high traffic

## Rate Limiting (Handled automatically via Redis)
# API requests: 100 per 15 minutes
# Auth requests: 5 per 15 minutes
# Write operations: 50 per 15 minutes
# Read operations: 200 per 15 minutes

## Background Jobs (BullMQ)
# Email queue processes 5 concurrent jobs
# Rate limit: 10 jobs per second
# 3 retry attempts with exponential backoff

## Performance Features
# ✅ Response compression (gzip)
# ✅ Redis caching (default TTL: 5 minutes)
# ✅ Database connection pooling (max: 100 connections)
# ✅ Database indexes on frequently queried fields
# ✅ Rate limiting with Redis store
# ✅ Background job queue for emails
# ✅ Sentry monitoring and error tracking
# ✅ Graceful shutdown handling

## Security Notes
1. Never commit .env file to version control
2. Use strong, unique secrets for JWT_SECRET and JWT_REFRESH_SECRET
3. Use app-specific passwords for email (not your account password)
4. In production, use secure Redis password
5. Enable HTTPS in production (update APP_URL and BASE_URL)
6. Restrict ALLOWED_ORIGINS to your actual domains
7. Keep Sentry DSN private
